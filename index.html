
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kredo Mall - Data Bundles</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
    <style>
        
        body {
            font-family: 'Roboto', sans-serif;
            
            color: #343a40;
            padding-top: 70px;
        }

        .hero {
            background: linear-gradient(135deg, #3cff00 0%, #0056b3 100%);
            color: #f7e012;
           
            text-align: center;
            border-radius: 20px;
            width:80%;
            margin-left: 10%;
            margin-right: 30%;
            
        }

        .hero h1 {
            font-size: 2.5rem;
            font-weight: 700;
        }

        .hero p {
            font-size: 1.2rem;
            font-weight: 400;
        }

        .bundle-card {
            transition: transform 0.2s;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .bundle-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        
.footer {
  position: relative;
  width: 100%;
  background: #3586ff;
  min-height: 100px;
  padding: 20px 50px;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}

.social-icon,
.menu {
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 10px 0;
  flex-wrap: wrap;
}

.social-icon__item,
.menu__item {
  list-style: none;
}

.social-icon__link {
  font-size: 2rem;
  color: #fff;
  margin: 0 10px;
  display: inline-block;
  transition: 0.5s;
}
.social-icon__link:hover {
  transform: translateY(-10px);
}

.menu__link {
  font-size: 1.2rem;
  color: #fff;
  margin: 0 10px;
  display: inline-block;
  transition: 0.5s;
  text-decoration: none;
  opacity: 0.75;
  font-weight: 300;
}

.menu__link:hover {
  opacity: 1;
}

.footer p {
  color: #fff;
  margin: 15px 0 10px 0;
  font-size: 1rem;
  font-weight: 300;
}

.wave {
  position: absolute;
  top: -100px;
  left: 0;
  width: 100%;
  height: 100px;
  background: url("https://i.ibb.co/wQZVxxk/wave.png");
  background-size: 1000px 100px;
}

.wave#wave1 {
  z-index: 1000;
  opacity: 1;
  bottom: 0;
  animation: animateWaves 4s linear infinite;
}

.wave#wave2 {
  z-index: 999;
  opacity: 0.5;
  bottom: 10px;
  animation: animate 4s linear infinite !important;
}

.wave#wave3 {
  z-index: 1000;
  opacity: 0.2;
  bottom: 15px;
  animation: animateWaves 3s linear infinite;
}

.wave#wave4 {
  z-index: 999;
  opacity: 0.7;
  bottom: 20px;
  animation: animate 3s linear infinite;
}

@keyframes animateWaves {
  0% {
    background-position-x: 1000px;
  }
  100% {
    background-positon-x: 0px;
  }
}

@keyframes animate {
  0% {
    background-position-x: -1000px;
  }
  100% {
    background-positon-x: 0px;
  }
}
/* Modal styles */
        .modal-header {
            background-color: #007bff;
            color: white;
        }

        .modal-body {
            background-color: #f9f9f9;
        }

        .modal-footer {
            border-top: none;
        }
        
    </style>
</head>

<body>

   <!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-primary fixed-top blurred-navbar">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Kredomall Enterprises</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link active" href="#">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#about">About</a>    
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#bundles" id="bundlesDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Data Bundles <i class="bi bi-chevron-down"></i>
            </a>
            <ul class="dropdown-menu" aria-labelledby="bundlesDropdown">
              <li><a class="dropdown-item" href="#bundles-mobile">Mobile Bundles</a></li>
              <li><a class="dropdown-item" href="#bundles-broadband">Broadband Bundles</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#contact">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  
    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1 class="display-4">Welcome  to Kredomall Enterprises</h1>
            <p class="lead">Purchase  affordable  data bundles, Airtime, minutes  and Sms tailored for your &friend  needs </p>
            <a href="#bundles" class="btn btn-light btn-lg">View Data Bundles</a>
        </div>
    </section>
    <hr>
    <!-- Search Input Field with Reduced Size -->
<div class="mb-3">
    <label for="numberSearchInput" class="form-label">Enter Amount you wish to spent:</label>
    <input type="number" class="form-control search-input" id="numberSearchInput" placeholder="Enter number (e.g., 200)">
</div>

<!-- Results Section -->
 <div class="master">
<div id="searchResults" class="mt-3">
    <h5></h5>
    <ul id="resultsList"></ul> <!-- Will display matching numbers -->
</div>
 </div>
<!-- JavaScript to search, scroll, and highlight the matching number -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var numberSearchInput = document.getElementById('numberSearchInput');
        var resultsList = document.getElementById('resultsList');

        // Function to remove previous highlights
        function removeHighlights() {
            var highlighted = document.querySelectorAll('.highlight');
            highlighted.forEach(function(el) {
                el.outerHTML = el.innerHTML; // Remove the span but keep the content
            });
        }

        // Listen for input in the search field
        numberSearchInput.addEventListener('input', function() {
            var searchValue = numberSearchInput.value.trim();
            resultsList.innerHTML = ''; // Clear previous results
            removeHighlights(); // Remove previous highlights
            
            if (searchValue !== '') {
                // Get all elements containing text
                var allElements = document.body.querySelectorAll('*:not(script):not(style):not(input)');
                var firstMatchFound = false;

                // Loop through all elements and search for the matching number
                allElements.forEach(function(element) {
                    if (element.children.length === 0 && element.textContent.includes(searchValue)) { // Only search in leaf nodes (no children)
                        // Highlight the matching number in the element
                        var regex = new RegExp(searchValue, 'g');
                        element.innerHTML = element.innerHTML.replace(regex, function(matched) {
                            return `<span class="highlight">${matched}</span>`;
                        });

                        // Scroll to the first match
                        if (!firstMatchFound) {
                            element.scrollIntoView({ behavior: 'smooth' });
                            firstMatchFound = true;
                        }

                        // Add the result to the results list
                        var li = document.createElement('li');
                        li.textContent = `${element.textContent.trim().substring(0, 50)}...`; // Show part of the matched text
                        resultsList.appendChild(li);
                    }
                });

                // If no matches were found, show "No results found"
                if (!firstMatchFound) {
                    var li = document.createElement('li');
                    li.textContent = 'No results found';
                    resultsList.appendChild(li);
                }
            }
        });
    });
</script>

<!-- CSS for Highlighting and Input Size -->
<style>
    .highlight {
        background-color: yellow;
        padding: 2px;
        font-weight: bold;
    }

    /* Smaller input field */
    .search-input {
        width: 100px; /* Adjust this value as needed */
    }
    .master{
        border-color: #01c722;
        border-radius: 10px;
        text-decoration: none;
    }
</style>
<hr>
 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        

        .bundle-card {
            transition: transform 0.2s;
        }

        .bundle-card:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Safaricom, Airtel, Telcom (Bundles, Data, Calls, SMS)</h1>

        <!-- Category Bar -->
        <ul class="nav nav-pills mb-3">
            <li class="nav-item">
                <button class="nav-link active" onclick="showCategory('Safaricom')">Safaricom</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" onclick="showCategory('Airtel')">Airtel</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" onclick="showCategory('Telkom')">Telkom</button>
            </li>
        </ul>

        <!-- Bundle Type Tabs (Data, Calls, SMS) -->
        <ul class="nav nav-tabs mb-3">
            <li class="nav-item">
                <a class="nav-link active" id="tab-data" href="#" onclick="showBundleType('Data')">Data</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="tab-calls" href="#" onclick="showBundleType('Calls')">Calls</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="tab-sms" href="#" onclick="showBundleType('SMS')">SMS</a>
            </li>
        </ul>

        <!-- Bundle Display Area -->
        <div id="bundleCards" class="row"></div>

        <!-- Modal for Phone Number and Description -->
        <div class="modal fade" id="buyModal" tabindex="-1" aria-labelledby="buyModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="buyModalLabel">Buy Bundle</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="buyForm">
                            <div class="mb-3">
                                <label for="phoneNumber" class="form-label">Phone Number</label>
                                <input type="tel" class="form-control" id="phoneNumber" placeholder="Enter your phone number" required>
                            </div>
                            <div class="mb-3">
                                <label for="bundleDescription" class="form-label">Bundle Description</label>
                                <textarea class="form-control" id="bundleDescription" rows="3" readonly></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Confirm Purchase</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Bundles data for each category and type
        const bundles = {
            Safaricom: {
                Data: [
                    { title: '1GB @ Ksh 100', validity: 'Valid for 24 hours' },
                    { title: '2GB @ Ksh 200', validity: 'Valid for 48 hours' }
                ],
                Calls: [
                    { title: '100 minutes @ Ksh 50', validity: 'Valid for 24 hours' },
                    { title: '500 minutes @ Ksh 200', validity: 'Valid for 7 days' }
                ],
                SMS: [
                    { title: '200 SMS @ Ksh 30', validity: 'Valid for 24 hours' },
                    { title: '1000 SMS @ Ksh 100', validity: 'Valid for 7 days' }
                ]
            },
            Airtel: {
                Data: [
                    { title: '500MB @ Ksh 50', validity: 'Valid for 24 hours' },
                    { title: '3GB @ Ksh 300', validity: 'Valid for 72 hours' }
                ],
                Calls: [
                    { title: '50 minutes @ Ksh 20', validity: 'Valid for 24 hours' },
                    { title: '300 minutes @ Ksh 150', validity: 'Valid for 7 days' }
                ],
                SMS: [
                    { title: '100 SMS @ Ksh 20', validity: 'Valid for 24 hours' },
                    { title: '500 SMS @ Ksh 60', validity: 'Valid for 7 days' }
                ]
            },
            Telkom: {
                Data: [
                    { title: '1GB @ Ksh 80', validity: 'Valid for 24 hours' },
                    { title: '5GB @ Ksh 500', validity: 'Valid for 7 days' }
                ],
                Calls: [
                    { title: '150 minutes @ Ksh 100', validity: 'Valid for 48 hours' },
                    { title: 'Unlimited minutes @ Ksh 1000', validity: 'Valid for 30 days' }
                ],
                SMS: [
                    { title: '300 SMS @ Ksh 40', validity: 'Valid for 24 hours' },
                    { title: 'Unlimited SMS @ Ksh 300', validity: 'Valid for 30 days' }
                ]
            }
        };

        let currentCategory = 'Safaricom'; // Default category
        let currentBundleType = 'Data';    // Default bundle type

        // Function to display bundles based on selected category and type
        function showCategory(category) {
            currentCategory = category;
            renderBundles();
            // Update active category button style
            document.querySelectorAll('.nav-pills .nav-link').forEach(link => link.classList.remove('active'));
            document.querySelector(`[onclick="showCategory('${category}')"]`).classList.add('active');
        }

        function showBundleType(bundleType) {
            currentBundleType = bundleType;
            renderBundles();
            // Update active bundle type tab style
            document.querySelectorAll('.nav-tabs .nav-link').forEach(tab => tab.classList.remove('active'));
            document.querySelector(`#tab-${bundleType.toLowerCase()}`).classList.add('active');
        }

        // Render bundles based on the selected category and bundle type
        function renderBundles() {
            const bundleCards = document.getElementById('bundleCards');
            bundleCards.innerHTML = ''; // Clear previous bundles

            const bundleData = bundles[currentCategory][currentBundleType];
            bundleData.forEach((bundle, index) => {
                const card = document.createElement('div');
                card.className = 'col-md-4 mb-3';
                card.innerHTML = `
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">${bundle.title}</h5>
                            <p class="card-text">${bundle.validity}</p>
                            <button class="btn btn-primary" onclick="openModal('${bundle.title}')">Buy</button>
                        </div>
                    </div>
                `;
                bundleCards.appendChild(card);
            });
        }

        // Open modal and set bundle description
        function openModal(bundleTitle) {
            document.getElementById('bundleDescription').value = bundleTitle;
            const buyModal = new bootstrap.Modal(document.getElementById('buyModal'));
            buyModal.show();
        }

        // Handle form submission
        document.getElementById('buyForm').onsubmit = function (e) {
            e.preventDefault(); // Prevent form submission
            const phoneNumber = document.getElementById('phoneNumber').value;
            const bundleDescription = document.getElementById('bundleDescription').value;
            alert(`Purchase confirmed for ${bundleDescription} to phone number ${phoneNumber}`);
            // Close modal after purchase
            const buyModal = bootstrap.Modal.getInstance(document.getElementById('buyModal'));
            buyModal.hide();
        };

        // Initial render of default category and bundle type
        renderBundles();
    </script>
    <hr>
    <!-- Airtime Section -->
     <!-- Trigger the Modal -->
<!--<button id="buyBtn" data-description="Bundle Package" data-price="100">Buy Bundle</button>
<button id="buyBtn" data-description="Airtime Package" data-price="50">Buy Airtime</button>


<div id="paymentModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2>Enter Your Phone Number</h2>

    <label for="phoneNumber">Phone Number:</label>
    <input type="text" id="phoneNumber" placeholder="e.g., 254712345678" required>

    <button id="payBtn">Proceed to Pay</button>
  </div>
</div>-->

<script>
// Modal functionality
const modal = document.getElementById('paymentModal');
const closeModal = document.getElementsByClassName('close')[0];
const buyButtons = document.querySelectorAll('#buyBtn');

// Attach click event to all "Buy" buttons to open the modal
buyButtons.forEach(button => {
  button.addEventListener('click', () => {
    const description = button.getAttribute('data-description');
    const price = button.getAttribute('data-price');

    // Open modal
    modal.style.display = 'block';

    // Handle the "Pay" button click inside the modal
    document.getElementById('payBtn').onclick = async function() {
      const phoneNumber = document.getElementById('phoneNumber').value;

      if (!phoneNumber) {
        alert('Please enter your phone number');
        return;
      }

      try {
        // Send the STK Push request to the backend
        const response = await fetch('/stk-push', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            phoneNumber: phoneNumber,
            amount: price,
            description: description
          })
        });

        const data = await response.json();
        if (data.message === 'STK Push initiated') {
          alert(`Payment request sent to phone number ${phoneNumber}. Check your phone.`);
        } else {
          alert('Payment failed. Please try again.');
        }

      } catch (error) {
        console.error('Payment Error:', error);
        alert('Payment failed due to a technical error.');
      }

      // Close the modal after submission
      modal.style.display = 'none';
    };
  });
});

// Close modal when the user clicks the close button
closeModal.onclick = function() {
  modal.style.display = 'none';
};

// Close modal if user clicks anywhere outside the modal content
window.onclick = function(event) {
  if (event.target === modal) {
    modal.style.display = 'none';
  }
};
</script>

<!-- Add CSS for Modal -->


<!-- Airtime Section -->
<section id="airtime-section" class="py-5">
    <div class="container">
        <h2>Airtime</h2>

        <!-- Category Tabs -->
        <ul class="nav nav-pills mb-3" id="pills-tab-airtime" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="safaricom-airtime-tab" data-bs-toggle="pill" data-bs-target="#safaricom-airtime" type="button" role="tab" aria-controls="safaricom-airtime" aria-selected="true">Safaricom</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="airtel-airtime-tab" data-bs-toggle="pill" data-bs-target="#airtel-airtime" type="button" role="tab" aria-controls="airtel-airtime" aria-selected="false">Airtel</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="telkom-airtime-tab" data-bs-toggle="pill" data-bs-target="#telkom-airtime" type="button" role="tab" aria-controls="telkom-airtime" aria-selected="false">Telkom</button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content" id="pills-tabContent-airtime">
            <!-- Safaricom Airtime -->
            <div class="tab-pane fade show active" id="safaricom-airtime" role="tabpanel" aria-labelledby="safaricom-airtime-tab">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Safaricom Airtime - Ksh 100</h5>
                                <p class="card-text">Buy Ksh 100 Safaricom airtime.</p>
                                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#airtimeModal" data-airtime-description="Safaricom Airtime - Ksh 100">Buy</button>
                            </div>
                        </div>
                    </div>
                    <!-- Add more Safaricom airtime cards as needed -->
                </div>
            </div>

            <!-- Airtel Airtime -->
            <div class="tab-pane fade" id="airtel-airtime" role="tabpanel" aria-labelledby="airtel-airtime-tab">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Airtel Airtime - Ksh 200</h5>
                                <p class="card-text">Buy Ksh 200 Airtel airtime.</p>
                                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#airtimeModal" data-airtime-description="Airtel Airtime - Ksh 200">Buy</button>
                            </div>
                        </div>
                    </div>
                    <!-- Add more Airtel airtime cards as needed -->
                </div>
            </div>

            <!-- Telkom Airtime -->
            <div class="tab-pane fade" id="telkom-airtime" role="tabpanel" aria-labelledby="telkom-airtime-tab">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Telkom Airtime - Ksh 300</h5>
                                <p class="card-text">Buy Ksh 300 Telkom airtime.</p>
                                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#airtimeModal" data-airtime-description="Telkom Airtime - Ksh 300">Buy</button>
                            </div>
                        </div>
                    </div>
                    <!-- Add more Telkom airtime cards as needed -->
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Airtime Purchase Modal -->
<div class="modal fade" id="airtimeModal" tabindex="-1" aria-labelledby="airtimeModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="airtimeModalLabel">Buy Airtime</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="airtimePhoneNumber" class="form-label">Phone Number</label>
                        <input type="text" class="form-control" id="airtimePhoneNumber" placeholder="Enter your phone number">
                    </div>
                    <div class="mb-3">
                        <label for="airtimeDescription" class="form-label">Description</label>
                        <textarea class="form-control" id="airtimeDescription" rows="3" readonly></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Confirm Purchase</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Script to Populate Modal Description for Airtime -->
<script>
    // Script to handle populating the modal with the correct airtime description
    document.addEventListener('DOMContentLoaded', function() {
        var airtimeModal = document.getElementById('airtimeModal');
        airtimeModal.addEventListener('show.bs.modal', function (event) {
            // Button that triggered the modal
            var button = event.relatedTarget;
            // Extract info from data-* attributes
            var airtimeDescription = button.getAttribute('data-airtime-description');
            // Update the modal's description input
            var descriptionInput = airtimeModal.querySelector('#airtimeDescription');
            descriptionInput.value = airtimeDescription;
        });
    });
</script>


<!-- Airtime Purchase Modal -->
<div class="modal fade" id="airtimeModal" tabindex="-1" aria-labelledby="airtimeModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="airtimeModalLabel">Buy Airtime</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="phoneNumber" class="form-label">Phone Number</label>
                        <input type="text" class="form-control" id="phoneNumber" placeholder="Enter your phone number">
                    </div>
                    <div class="mb-3">
                        <label for="description" class="form-label">Description</label>
                        <textarea class="form-control" id="description" rows="3" placeholder="E.g., Safaricom Airtime Ksh 100"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Confirm Purchase</button>
                </form>
            </div>
        </div>
    </div>
</div>
<hr>
<!-- No Expiry Bundles Section -->
<section id="no-expiry-bundles" class="py-5">
    <div class="container">
        <h2>No Expiry Data Bundles</h2>

        <!-- Category Tabs -->
        <ul class="nav nav-pills mb-3" id="pills-tab-no-expiry" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="safaricom-no-expiry-tab" data-bs-toggle="pill" data-bs-target="#safaricom-no-expiry" type="button" role="tab" aria-controls="safaricom-no-expiry" aria-selected="true">Safaricom</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="airtel-no-expiry-tab" data-bs-toggle="pill" data-bs-target="#airtel-no-expiry" type="button" role="tab" aria-controls="airtel-no-expiry" aria-selected="false">Airtel</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="telkom-no-expiry-tab" data-bs-toggle="pill" data-bs-target="#telkom-no-expiry" type="button" role="tab" aria-controls="telkom-no-expiry" aria-selected="false">Telkom</button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content" id="pills-tabContent-no-expiry">
            <!-- Safaricom No Expiry Bundles -->
            <div class="tab-pane fade show active" id="safaricom-no-expiry" role="tabpanel" aria-labelledby="safaricom-no-expiry-tab">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Safaricom No Expiry - 1GB</h5>
                                <p class="card-text">Get 1GB Safaricom data bundle with no expiry for Ksh 100.</p>
                                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#noExpiryBundleModal" data-bundle-description="Safaricom No Expiry - 1GB">Buy</button>
                            </div>
                        </div>
                    </div>
                    <!-- Add more Safaricom no expiry bundles as needed -->
                </div>
            </div>

            <!-- Airtel No Expiry Bundles -->
            <div class="tab-pane fade" id="airtel-no-expiry" role="tabpanel" aria-labelledby="airtel-no-expiry-tab">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Airtel No Expiry - 2GB</h5>
                                <p class="card-text">Get 2GB Airtel data bundle with no expiry for Ksh 200.</p>
                                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#noExpiryBundleModal" data-bundle-description="Airtel No Expiry - 2GB">Buy</button>
                            </div>
                        </div>
                    </div>
                    <!-- Add more Airtel no expiry bundles as needed -->
                </div>
            </div>

            <!-- Telkom No Expiry Bundles -->
            <div class="tab-pane fade" id="telkom-no-expiry" role="tabpanel" aria-labelledby="telkom-no-expiry-tab">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Telkom No Expiry - 3GB</h5>
                                <p class="card-text">Get 3GB Telkom data bundle with no expiry for Ksh 300.</p>
                                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#noExpiryBundleModal" data-bundle-description="Telkom No Expiry - 3GB">Buy</button>
                            </div>
                        </div>
                    </div>
                    <!-- Add more Telkom no expiry bundles as needed -->
                </div>
            </div>
        </div>
    </div>
</section>

<!-- No Expiry Bundle Purchase Modal -->
<div class="modal fade" id="noExpiryBundleModal" tabindex="-1" aria-labelledby="noExpiryBundleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="noExpiryBundleModalLabel">Buy No Expiry Bundle</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="phoneNumber" class="form-label">Phone Number</label>
                        <input type="text" class="form-control" id="phoneNumber" placeholder="Enter your phone number">
                    </div>
                    <div class="mb-3">
                        <label for="bundleDescription" class="form-label">Description</label>
                        <textarea class="form-control" id="bundleDescription" rows="3" readonly></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Confirm Purchase</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Script to Populate Modal Description -->
<script>
    // Script to handle populating the modal with the correct bundle description
    document.addEventListener('DOMContentLoaded', function() {
        var noExpiryBundleModal = document.getElementById('noExpiryBundleModal');
        noExpiryBundleModal.addEventListener('show.bs.modal', function (event) {
            // Button that triggered the modal
            var button = event.relatedTarget;
            // Extract info from data-* attributes
            var bundleDescription = button.getAttribute('data-bundle-description');
            // Update the modal's description input
            var descriptionInput = noExpiryBundleModal.querySelector('#bundleDescription');
            descriptionInput.value = bundleDescription;
        });
    });
</script>
<hr>
<!-- About Section -->
<section id="about" class="py-5">
    <div class="container">
        <h2>About Us</h2>
        <p>
            We are a leading provider of data, calls, and SMS bundles across all major networks in Kenya, including Safaricom, Airtel, and Telkom. Our mission is to offer affordable and convenient bundle packages tailored to meet your communication needs.
        </p>
    </div>
</section>

<!-- Footer -->
<footer class="footer">
    <div class="waves">
      <div class="wave" id="wave1"></div>
      <div class="wave" id="wave2"></div>
      <div class="wave" id="wave3"></div>
      <div class="wave" id="wave4"></div>
    </div>
    <ul class="social-icon">
      <li class="social-icon__item"><a class="social-icon__link" href="#">
          <ion-icon name="logo-facebook"></ion-icon>
        </a></li>
      <li class="social-icon__item"><a class="social-icon__link" href="#">
          <ion-icon name="logo-twitter"></ion-icon>
        </a></li>
      <li class="social-icon__item"><a class="social-icon__link" href="#">
          <ion-icon name="logo-linkedin"></ion-icon>
        </a></li>
      <li class="social-icon__item"><a class="social-icon__link" href="#">
          <ion-icon name="logo-instagram"></ion-icon>
        </a></li>
    </ul>
    <ul class="menu">
      <li class="menu__item"><a class="menu__link" href="#">Home</a></li>
      <li class="menu__item"><a class="menu__link" href="#About">About</a></li>
      <!--<li class="menu__item"><a class="menu__link" href="#">Services</a></li>
      <li class="menu__item"><a class="menu__link" href="#">Team</a></li>
      <li class="menu__item"><a class="menu__link" href="#">Contact</a></li>-->

    </ul>
    <p>&copy;2024 NexusGK _ Softwares | All Rights Reserved</p>
  </footer>
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

<script>
    // Import necessary packages
const express = require('express');
const axios = require('axios');
const bodyParser = require('body-parser');
const btoa = require('btoa');

const app = express();
app.use(bodyParser.json());

const consumerKey = 'YOUR_CONSUMER_KEY';
const consumerSecret = 'YOUR_CONSUMER_SECRET';
const shortcode = 'YOUR_SHORTCODE';  // Example: '174379'
const passkey = 'YOUR_MPESA_PASSKEY';

// Endpoint to generate MPESA access token
app.get('/get-token', async (req, res) => {
    const auth = btoa(`${consumerKey}:${consumerSecret}`);
    try {
        const response = await axios.get('https://sandbox.safaricom.co.ke/oauth/v1/generate?grant_type=client_credentials', {
            headers: {
                Authorization: `Basic ${auth}`,
            },
        });
        res.json({ token: response.data.access_token });
    } catch (error) {
        console.error('Error getting token', error);
        res.status(500).json({ message: 'Error getting token' });
    }
});

// Endpoint to handle MPESA STK Push request
app.post('/stk-push', async (req, res) => {
    const { phoneNumber, amount, description } = req.body;  // phoneNumber from modal input and amount/description based on selected item
    const tokenResponse = await axios.get('http://localhost:3000/get-token');
    const token = tokenResponse.data.token;

    const timestamp = new Date().toISOString().replace(/[-T:.Z]/g, '').slice(0, -4);
    const password = Buffer.from(`${shortcode}${passkey}${timestamp}`).toString('base64');

    const stkPushData = {
        BusinessShortCode: shortcode,
        Password: password,
        Timestamp: timestamp,
        TransactionType: 'CustomerPayBillOnline',
        Amount: amount,
        PartyA: phoneNumber,  // Phone number to be charged
        PartyB: shortcode,
        PhoneNumber: phoneNumber,
        CallBackURL: 'https://yourdomain.com/mpesa-callback',  // Callback URL to handle the response
        AccountReference: description,  // Description of the purchase (e.g., Bundle/Airtime)
        TransactionDesc: `Payment for ${description}`
    };

    try {
        const stkPushResponse = await axios.post('https://sandbox.safaricom.co.ke/mpesa/stkpush/v1/processrequest', stkPushData, {
            headers: {
                Authorization: `Bearer ${token}`
            }
        });

        res.json({ message: 'STK Push initiated', data: stkPushResponse.data });
    } catch (error) {
        console.error('Error in STK Push:', error);
        res.status(500).json({ message: 'Error initiating STK Push' });
    }
});

// Start server
app.listen(3000, () => {
    console.log('Server running on port 3000');
});

</script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>